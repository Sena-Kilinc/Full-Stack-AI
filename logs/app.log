2025-10-02 08:15:23 - main - [32mINFO[0m - startup_event:60 - ================================================================================
2025-10-02 08:15:23 - main - [32mINFO[0m - startup_event:61 - ML Pipeline Service baÅŸlatÄ±lÄ±yor...
2025-10-02 08:15:23 - main - [32mINFO[0m - startup_event:62 - ================================================================================
2025-10-02 08:15:23 - ml_pipeline - [32mINFO[0m - __init__:191 - ML Pipeline initialized
2025-10-02 08:15:23 - main - [32mINFO[0m - startup_event:72 - Data dizini: data
2025-10-02 08:15:23 - main - [32mINFO[0m - startup_event:73 - Model dizini: models
2025-10-02 08:15:23 - main - [32mINFO[0m - startup_event:74 - Log dizini: logs
2025-10-02 08:15:23 - main - [32mINFO[0m - startup_event:75 - Servis hazÄ±r!
2025-10-02 08:15:33 - api - [32mINFO[0m - log_request:173 - GET /health
2025-10-02 08:15:55 - api - [32mINFO[0m - log_request:173 - GET /health
2025-10-02 08:16:06 - api - [32mINFO[0m - log_request:173 - GET /health
2025-10-02 08:16:34 - api - [32mINFO[0m - log_request:173 - POST /upload - Data: {'filename': 'data.xlsx'}
2025-10-02 08:16:34 - main - [32mINFO[0m - upload_data:150 - Dosya kaydedildi: data\data.xlsx
2025-10-02 08:16:36 - main - [32mINFO[0m - upload_data:154 - Excel okundu: 200 satÄ±r, 10 sÃ¼tun
2025-10-02 08:16:36 - main - [32mINFO[0m - upload_data:178 - Veri baÅŸarÄ±yla yÃ¼klendi: data.xlsx
2025-10-02 08:16:36 - main - [32mINFO[0m - upload_data:179 - Hedef deÄŸiÅŸkenler mevcut: True
2025-10-02 08:18:22 - api - [32mINFO[0m - log_request:173 - POST /config - Data: {'algorithm': <AlgorithmType.RANDOM_FOREST: 'random_forest'>, 'parameters': {'max_depth': 15, 'min_samples_split': 5, 'n_estimators': 200}}
2025-10-02 08:18:22 - ml_pipeline - [32mINFO[0m - configure:212 - Algorithm configured: AlgorithmType.RANDOM_FOREST
2025-10-02 08:18:22 - ml_pipeline - [32mINFO[0m - configure:214 - Parameters: {'max_depth': 15, 'min_samples_split': 5, 'n_estimators': 200}
2025-10-02 08:18:22 - main - [32mINFO[0m - configure_algorithm:242 - Algoritma yapÄ±landÄ±rÄ±ldÄ±: AlgorithmType.RANDOM_FOREST
2025-10-02 08:18:47 - api - [32mINFO[0m - log_request:173 - POST /train - Data: {'test_size': 0.25, 'random_state': 42}
2025-10-02 08:18:47 - main - [32mINFO[0m - train_model:301 - ================================================================================
2025-10-02 08:18:47 - main - [32mINFO[0m - train_model:302 - MODEL EÄžÄ°TÄ°MÄ° BAÅžLIYOR
2025-10-02 08:18:47 - main - [32mINFO[0m - train_model:303 - ================================================================================
2025-10-02 08:18:47 - main - [32mINFO[0m - train_model:304 - Algoritma: AlgorithmType.RANDOM_FOREST
2025-10-02 08:18:47 - main - [32mINFO[0m - train_model:305 - Test size: 0.25
2025-10-02 08:18:47 - ml_pipeline - [32mINFO[0m - train:306 - ================================================================================
2025-10-02 08:18:47 - ml_pipeline - [32mINFO[0m - train:307 - TRAINING STARTED
2025-10-02 08:18:47 - ml_pipeline - [32mINFO[0m - train:308 - ================================================================================
2025-10-02 08:18:47 - ml_pipeline - [32mINFO[0m - _prepare_data:237 - Data preparation started
2025-10-02 08:18:47 - ml_pipeline - [32mINFO[0m - _prepare_data:238 - Input shape: (200, 10)
2025-10-02 08:18:47 - ml_pipeline - [32mINFO[0m - _prepare_data:256 - Feature count: 43
2025-10-02 08:18:47 - ml_pipeline - [32mINFO[0m - _prepare_data:274 - seller_number: 55 unique classes
2025-10-02 08:18:47 - ml_pipeline - [32mINFO[0m - _prepare_data:274 - customer_number: 46 unique classes
2025-10-02 08:18:47 - ml_pipeline - [32mINFO[0m - _prepare_data:274 - main_account: 9 unique classes
2025-10-02 08:18:47 - ml_pipeline - [32mINFO[0m - _prepare_data:283 - Train set: (150, 43)
2025-10-02 08:18:47 - ml_pipeline - [32mINFO[0m - _prepare_data:284 - Test set: (50, 43)
2025-10-02 08:18:47 - ml_pipeline - [32mINFO[0m - train:314 - Training AlgorithmType.RANDOM_FOREST...
2025-10-02 08:18:50 - ml_pipeline - [32mINFO[0m - _evaluate:357 - Evaluating on train set...
2025-10-02 08:18:51 - ml_pipeline - [32mINFO[0m - _evaluate:382 - seller_number: Acc=0.9667, F1=0.9684
2025-10-02 08:18:51 - ml_pipeline - [32mINFO[0m - _evaluate:382 - customer_number: Acc=1.0000, F1=1.0000
2025-10-02 08:18:51 - ml_pipeline - [32mINFO[0m - _evaluate:382 - main_account: Acc=0.9933, F1=0.9900
2025-10-02 08:18:51 - ml_pipeline - [32mINFO[0m - _evaluate:393 - Overall: Acc=0.9867, F1=0.9861
2025-10-02 08:18:51 - ml_pipeline - [32mINFO[0m - _evaluate:357 - Evaluating on test set...
2025-10-02 08:18:52 - ml_pipeline - [32mINFO[0m - _evaluate:382 - seller_number: Acc=0.5400, F1=0.5151
2025-10-02 08:18:52 - ml_pipeline - [32mINFO[0m - _evaluate:382 - customer_number: Acc=0.7200, F1=0.7040
2025-10-02 08:18:52 - ml_pipeline - [32mINFO[0m - _evaluate:382 - main_account: Acc=0.9400, F1=0.9244
2025-10-02 08:18:52 - ml_pipeline - [32mINFO[0m - _evaluate:393 - Overall: Acc=0.7333, F1=0.7145
2025-10-02 08:18:52 - ml_pipeline - [32mINFO[0m - _save_model:457 - Model saved: models\model_AlgorithmType.RANDOM_FOREST.pkl
2025-10-02 08:18:52 - ml_pipeline - [32mINFO[0m - train:335 - ================================================================================
2025-10-02 08:18:52 - ml_pipeline - [32mINFO[0m - train:336 - TRAINING COMPLETED
2025-10-02 08:18:52 - ml_pipeline - [32mINFO[0m - train:337 - ================================================================================
2025-10-02 08:18:52 - main - [32mINFO[0m - train_model:313 - ================================================================================
2025-10-02 08:18:52 - main - [32mINFO[0m - train_model:314 - MODEL EÄžÄ°TÄ°MÄ° TAMAMLANDI
2025-10-02 08:18:52 - main - [32mINFO[0m - train_model:315 - ================================================================================
2025-10-02 08:19:11 - api - [32mINFO[0m - log_request:173 - POST /predict - Data: {'company_code': 1504, 'document_number': '4200004825', 'description': 'EF7789421YORUMAJANSPAZARLAMAITHALATVET-FATURABEDEL', 'payment_type': <PaymentType.H: 'H'>, 'amount': 400000.0, 'currency_code': 'TRY', 'transaction_type': 'NEFT'}
2025-10-02 08:19:12 - main - [31mERROR[0m - predict:375 - Tahmin hatasÄ±: arrays used as indices must be of integer (or boolean) type
Traceback (most recent call last):
  File "C:\Users\Sena\Desktop\case\case3\main.py", line 362, in predict
    predictions = ml_pipeline.predict(input_data)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Sena\Desktop\case\case3\ml_pipeline.py", line 433, in predict
    decoded_value = self.label_encoders[target_name].inverse_transform([encoded_value])[0]
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Sena\anaconda3\envs\myenv\Lib\site-packages\sklearn\preprocessing\_label.py", line 162, in inverse_transform
    return self.classes_[y]
           ~~~~~~~~~~~~~^^^
IndexError: arrays used as indices must be of integer (or boolean) type
2025-10-02 08:19:12 - main - [31mERROR[0m - http_exception_handler:431 - HTTP Error 500: Tahmin hatasÄ±: arrays used as indices must be of integer (or boolean) type
2025-10-02 08:19:45 - api - [32mINFO[0m - log_request:173 - POST /predict - Data: {'company_code': 1504, 'document_number': '4200004825', 'description': 'EF7789421YORUMAJANSPAZARLAMAITHALATVET-FATURABEDEL', 'payment_type': <PaymentType.H: 'H'>, 'amount': 400000.0, 'currency_code': 'TRY', 'transaction_type': 'NEFT'}
2025-10-02 08:19:46 - main - [31mERROR[0m - predict:375 - Tahmin hatasÄ±: arrays used as indices must be of integer (or boolean) type
Traceback (most recent call last):
  File "C:\Users\Sena\Desktop\case\case3\main.py", line 362, in predict
    predictions = ml_pipeline.predict(input_data)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Sena\Desktop\case\case3\ml_pipeline.py", line 433, in predict
    decoded_value = self.label_encoders[target_name].inverse_transform([encoded_value])[0]
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Sena\anaconda3\envs\myenv\Lib\site-packages\sklearn\preprocessing\_label.py", line 162, in inverse_transform
    return self.classes_[y]
           ~~~~~~~~~~~~~^^^
IndexError: arrays used as indices must be of integer (or boolean) type
2025-10-02 08:19:46 - main - [31mERROR[0m - http_exception_handler:431 - HTTP Error 500: Tahmin hatasÄ±: arrays used as indices must be of integer (or boolean) type
2025-10-02 08:20:40 - main - [32mINFO[0m - shutdown_event:81 - ML Pipeline Service kapatÄ±lÄ±yor...
2025-10-02 08:21:02 - main - [32mINFO[0m - startup_event:60 - ================================================================================
2025-10-02 08:21:02 - main - [32mINFO[0m - startup_event:61 - ML Pipeline Service baÅŸlatÄ±lÄ±yor...
2025-10-02 08:21:02 - main - [32mINFO[0m - startup_event:62 - ================================================================================
2025-10-02 08:21:02 - ml_pipeline - [32mINFO[0m - __init__:191 - ML Pipeline initialized
2025-10-02 08:21:02 - main - [32mINFO[0m - startup_event:72 - Data dizini: data
2025-10-02 08:21:02 - main - [32mINFO[0m - startup_event:73 - Model dizini: models
2025-10-02 08:21:02 - main - [32mINFO[0m - startup_event:74 - Log dizini: logs
2025-10-02 08:21:02 - main - [32mINFO[0m - startup_event:75 - Servis hazÄ±r!
2025-10-02 08:21:31 - api - [32mINFO[0m - log_request:173 - POST /upload - Data: {'filename': 'data.xlsx'}
2025-10-02 08:21:31 - main - [32mINFO[0m - upload_data:150 - Dosya kaydedildi: data\data.xlsx
2025-10-02 08:21:32 - main - [32mINFO[0m - upload_data:154 - Excel okundu: 200 satÄ±r, 10 sÃ¼tun
2025-10-02 08:21:32 - main - [32mINFO[0m - upload_data:178 - Veri baÅŸarÄ±yla yÃ¼klendi: data.xlsx
2025-10-02 08:21:32 - main - [32mINFO[0m - upload_data:179 - Hedef deÄŸiÅŸkenler mevcut: True
2025-10-02 08:21:45 - api - [32mINFO[0m - log_request:173 - POST /config - Data: {'algorithm': <AlgorithmType.RANDOM_FOREST: 'random_forest'>, 'parameters': {'max_depth': 15, 'min_samples_split': 5, 'n_estimators': 200}}
2025-10-02 08:21:45 - ml_pipeline - [32mINFO[0m - configure:212 - Algorithm configured: AlgorithmType.RANDOM_FOREST
2025-10-02 08:21:45 - ml_pipeline - [32mINFO[0m - configure:214 - Parameters: {'max_depth': 15, 'min_samples_split': 5, 'n_estimators': 200}
2025-10-02 08:21:45 - main - [32mINFO[0m - configure_algorithm:242 - Algoritma yapÄ±landÄ±rÄ±ldÄ±: AlgorithmType.RANDOM_FOREST
2025-10-02 08:21:48 - api - [32mINFO[0m - log_request:173 - POST /config - Data: {'algorithm': <AlgorithmType.RANDOM_FOREST: 'random_forest'>, 'parameters': {'max_depth': 15, 'min_samples_split': 5, 'n_estimators': 200}}
2025-10-02 08:21:48 - ml_pipeline - [32mINFO[0m - configure:212 - Algorithm configured: AlgorithmType.RANDOM_FOREST
2025-10-02 08:21:48 - ml_pipeline - [32mINFO[0m - configure:214 - Parameters: {'max_depth': 15, 'min_samples_split': 5, 'n_estimators': 200}
2025-10-02 08:21:48 - main - [32mINFO[0m - configure_algorithm:242 - Algoritma yapÄ±landÄ±rÄ±ldÄ±: AlgorithmType.RANDOM_FOREST
2025-10-02 08:21:59 - api - [32mINFO[0m - log_request:173 - POST /train - Data: {'test_size': 0.25, 'random_state': 42}
2025-10-02 08:21:59 - main - [32mINFO[0m - train_model:301 - ================================================================================
2025-10-02 08:21:59 - main - [32mINFO[0m - train_model:302 - MODEL EÄžÄ°TÄ°MÄ° BAÅžLIYOR
2025-10-02 08:21:59 - main - [32mINFO[0m - train_model:303 - ================================================================================
2025-10-02 08:21:59 - main - [32mINFO[0m - train_model:304 - Algoritma: AlgorithmType.RANDOM_FOREST
2025-10-02 08:21:59 - main - [32mINFO[0m - train_model:305 - Test size: 0.25
2025-10-02 08:21:59 - ml_pipeline - [32mINFO[0m - train:306 - ================================================================================
2025-10-02 08:21:59 - ml_pipeline - [32mINFO[0m - train:307 - TRAINING STARTED
2025-10-02 08:21:59 - ml_pipeline - [32mINFO[0m - train:308 - ================================================================================
2025-10-02 08:21:59 - ml_pipeline - [32mINFO[0m - _prepare_data:237 - Data preparation started
2025-10-02 08:21:59 - ml_pipeline - [32mINFO[0m - _prepare_data:238 - Input shape: (200, 10)
2025-10-02 08:21:59 - ml_pipeline - [32mINFO[0m - _prepare_data:256 - Feature count: 43
2025-10-02 08:21:59 - ml_pipeline - [32mINFO[0m - _prepare_data:274 - seller_number: 55 unique classes
2025-10-02 08:21:59 - ml_pipeline - [32mINFO[0m - _prepare_data:274 - customer_number: 46 unique classes
2025-10-02 08:21:59 - ml_pipeline - [32mINFO[0m - _prepare_data:274 - main_account: 9 unique classes
2025-10-02 08:21:59 - ml_pipeline - [32mINFO[0m - _prepare_data:283 - Train set: (150, 43)
2025-10-02 08:21:59 - ml_pipeline - [32mINFO[0m - _prepare_data:284 - Test set: (50, 43)
2025-10-02 08:21:59 - ml_pipeline - [32mINFO[0m - train:314 - Training AlgorithmType.RANDOM_FOREST...
2025-10-02 08:22:02 - ml_pipeline - [32mINFO[0m - _evaluate:357 - Evaluating on train set...
2025-10-02 08:22:03 - ml_pipeline - [32mINFO[0m - _evaluate:382 - seller_number: Acc=0.9667, F1=0.9684
2025-10-02 08:22:03 - ml_pipeline - [32mINFO[0m - _evaluate:382 - customer_number: Acc=1.0000, F1=1.0000
2025-10-02 08:22:03 - ml_pipeline - [32mINFO[0m - _evaluate:382 - main_account: Acc=0.9933, F1=0.9900
2025-10-02 08:22:03 - ml_pipeline - [32mINFO[0m - _evaluate:393 - Overall: Acc=0.9867, F1=0.9861
2025-10-02 08:22:03 - ml_pipeline - [32mINFO[0m - _evaluate:357 - Evaluating on test set...
2025-10-02 08:22:03 - ml_pipeline - [32mINFO[0m - _evaluate:382 - seller_number: Acc=0.5400, F1=0.5151
2025-10-02 08:22:03 - ml_pipeline - [32mINFO[0m - _evaluate:382 - customer_number: Acc=0.7200, F1=0.7040
2025-10-02 08:22:04 - ml_pipeline - [32mINFO[0m - _evaluate:382 - main_account: Acc=0.9400, F1=0.9244
2025-10-02 08:22:04 - ml_pipeline - [32mINFO[0m - _evaluate:393 - Overall: Acc=0.7333, F1=0.7145
2025-10-02 08:22:04 - ml_pipeline - [32mINFO[0m - _save_model:465 - Model saved: models\model_AlgorithmType.RANDOM_FOREST.pkl
2025-10-02 08:22:04 - ml_pipeline - [32mINFO[0m - train:335 - ================================================================================
2025-10-02 08:22:04 - ml_pipeline - [32mINFO[0m - train:336 - TRAINING COMPLETED
2025-10-02 08:22:04 - ml_pipeline - [32mINFO[0m - train:337 - ================================================================================
2025-10-02 08:22:04 - main - [32mINFO[0m - train_model:313 - ================================================================================
2025-10-02 08:22:04 - main - [32mINFO[0m - train_model:314 - MODEL EÄžÄ°TÄ°MÄ° TAMAMLANDI
2025-10-02 08:22:04 - main - [32mINFO[0m - train_model:315 - ================================================================================
2025-10-02 08:22:12 - api - [32mINFO[0m - log_request:173 - POST /predict - Data: {'company_code': 1504, 'document_number': '4200004825', 'description': 'EF7789421YORUMAJANSPAZARLAMAITHALATVET-FATURABEDEL', 'payment_type': <PaymentType.H: 'H'>, 'amount': 400000.0, 'currency_code': 'TRY', 'transaction_type': 'NEFT'}
2025-10-02 08:22:12 - main - [32mINFO[0m - predict:364 - Tahmin yapÄ±ldÄ±: seller_number=None customer_number='1200110387.0' main_account=None
2025-10-02 08:22:37 - api - [32mINFO[0m - log_request:173 - GET /metrics
2025-10-02 08:24:27 - api - [32mINFO[0m - log_request:173 - POST /predict - Data: {'company_code': 1504, 'document_number': '4200004826', 'description': 'SATIS FATURASI ABC LTD STI', 'payment_type': <PaymentType.S: 'S'>, 'amount': 150000.0, 'currency_code': 'TRY', 'transaction_type': 'NTRF'}
2025-10-02 08:24:28 - main - [32mINFO[0m - predict:364 - Tahmin yapÄ±ldÄ±: seller_number=None customer_number=None main_account=None
2025-10-02 08:24:40 - api - [32mINFO[0m - log_request:173 - POST /predict - Data: {'company_code': 1504, 'document_number': '4200004825', 'description': 'EF7789421YORUMAJANSPAZARLAMAITHALATVET-FATURABEDEL', 'payment_type': <PaymentType.H: 'H'>, 'amount': 400000.0, 'currency_code': 'TRY', 'transaction_type': 'NEFT'}
2025-10-02 08:24:41 - main - [32mINFO[0m - predict:364 - Tahmin yapÄ±ldÄ±: seller_number=None customer_number='1200110387.0' main_account=None
2025-10-02 08:25:09 - main - [32mINFO[0m - shutdown_event:81 - ML Pipeline Service kapatÄ±lÄ±yor...
2025-10-02 08:26:48 - main - [32mINFO[0m - startup_event:60 - ================================================================================
2025-10-02 08:26:48 - main - [32mINFO[0m - startup_event:61 - ML Pipeline Service baÅŸlatÄ±lÄ±yor...
2025-10-02 08:26:48 - main - [32mINFO[0m - startup_event:62 - ================================================================================
2025-10-02 08:26:48 - ml_pipeline - [32mINFO[0m - __init__:191 - ML Pipeline initialized
2025-10-02 08:26:48 - main - [32mINFO[0m - startup_event:72 - Data dizini: data
2025-10-02 08:26:48 - main - [32mINFO[0m - startup_event:73 - Model dizini: models
2025-10-02 08:26:48 - main - [32mINFO[0m - startup_event:74 - Log dizini: logs
2025-10-02 08:26:48 - main - [32mINFO[0m - startup_event:75 - Servis hazÄ±r!
2025-10-02 08:27:38 - api - [32mINFO[0m - log_request:173 - GET /algorithms
2025-10-02 08:28:00 - api - [32mINFO[0m - log_request:173 - GET /algorithms
2025-10-02 08:28:24 - main - [32mINFO[0m - shutdown_event:81 - ML Pipeline Service kapatÄ±lÄ±yor...
